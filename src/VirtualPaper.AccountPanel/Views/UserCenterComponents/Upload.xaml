<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="VirtualPaper.AccountPanel.Views.UserCenterComponents.Upload"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VirtualPaper.AccountPanel.Views.UserCenterComponents"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Loaded="Page_Loaded"
    NavigationCacheMode="Disabled">

    <Grid x:Name="gridPublish">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="0.6*"/>
                <RowDefinition Height="0.26*"/>
            </Grid.RowDefinitions>

            <Border 
                x:Name="import" 
                Margin="10">
                <Grid>
                    <Rectangle StrokeDashArray="2,2" 
                       Stroke="Gray" 
                       StrokeThickness="2"/>
                    <Image 
                        x:Name="imgWallpaper" 
                        Stretch="Uniform" 
                        HorizontalAlignment="Stretch" 
                        VerticalAlignment="Stretch"
                        Source="{x:Bind _viewModel.WpBasicData.ThumbnailPath, Mode=OneWay, FallbackValue={x:Null}}"/>
                    <Button 
                        Background="Transparent" 
                        BorderThickness="0" 
                        Click="ImportButton_Click" 
                        Padding="0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch">
                        <Button.Content>
                            <TextBlock 
                                VerticalAlignment="Center" 
                                HorizontalAlignment="Center"
                                Text="点击此处 导入壁纸" 
                                Foreground="{ThemeResource TextFillColorDisabledBrush}"
                                FontSize="20"/>
                        </Button.Content>
                    </Button>
                </Grid>
            </Border>

            <Border 
                x:Name="paperInfo" 
                Grid.Row="1" 
                BorderBrush="{ThemeResource ControlStrokeColorOnAccentSecondaryBrush}" 
                Margin="10" 
                BorderThickness="1">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="分辨率:" FontSize="14"/>
                        <TextBlock Text="{x:Bind _viewModel.WpBasicData.Resolution, Mode=OneWay, FallbackValue={x:Null}}" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="比例:" FontSize="14"/>
                        <TextBlock Text="{x:Bind _viewModel.WpBasicData.AspectRatio, Mode=OneWay, FallbackValue={x:Null}}" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Row="0" Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="大小:" FontSize="14"/>
                        <TextBlock Text="{x:Bind _viewModel.WpBasicData.FileSize, Mode=OneWay, FallbackValue={x:Null}}" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="壁纸类型:" FontSize="14"/>
                        <TextBlock Text="{x:Bind _viewModel.WpBasicData.FType, Mode=OneWay, FallbackValue={x:Null}}" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="文件类型:" FontSize="14"/>
                        <TextBlock Text="{x:Bind _viewModel.WpBasicData.FileExtension, Mode=OneWay, FallbackValue={x:Null}}" FontSize="14"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <Frame
            x:Name="ccInfoControl"
            Grid.Column="1" 
            IsEnabled="{x:Bind _viewModel.IsEnable, Mode=OneWay}">
            <Border 
                x:Name="bdrInfoSet"
                BorderBrush="{ThemeResource ControlStrokeColorOnAccentSecondaryBrush}" 
                Margin="10" 
                BorderThickness="1">
                <ScrollViewer 
                    Grid.Row="1" 
                    Margin="10"
                    HorizontalScrollBarVisibility="Disabled" 
                    VerticalScrollBarVisibility="Hidden">
                    <Grid x:Name="gridInfoSet">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Grid VerticalAlignment="Center" Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <TextBlock 
                                Text="标题:" 
                                Margin="4 0 4 4" 
                                FontSize="16" 
                                VerticalAlignment="Center"/>
                            <TextBox 
                                Grid.Column="1" 
                                x:Name="txbName" 
                                Margin="4"
                                Padding="4 6 4 4" 
                                MaxLength="80"
                                FontSize="16" 
                                Height="40"
                                PlaceholderText="不能为空"
                                Text="{x:Bind _viewModel.Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                VerticalAlignment="Center" 
                                BorderThickness="1" 
                                BorderBrush="Gray"/>
                        </Grid>

                        <Grid 
                            Grid.Row="1"
                            VerticalAlignment="Center" 
                            Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <TextBlock 
                                Text="分区:" 
                                Margin="4 0 4 4" 
                                FontSize="16" 
                                VerticalAlignment="Center"/>
                            <ComboBox 
                                x:Name="cbxPartitions" 
                                Grid.Column="1"
                                HorizontalAlignment="Stretch"
                                FontSize="16"
                                BorderBrush="Gray" 
                                BorderThickness="1" 
                                IsEditable="False"
                                Height="40" 
                                Margin="4"
                                SelectedItem="{x:Bind _viewModel.SelectedPartition, Mode=TwoWay}"
                                ItemsSource="{x:Bind _viewModel.Partitions, Mode=OneWay}">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}"/>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </Grid>

                        <Grid 
                            Grid.Row="2" 
                            VerticalAlignment="Center" 
                            Margin="6">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition Height="auto"/>
                            </Grid.RowDefinitions>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="auto"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>

                                <TextBlock 
                                    Text="标签:" 
                                    Margin="4 0 4 4" 
                                    FontSize="16"                                
                                    VerticalAlignment="Center"/>
                                <TextBox 
                                    x:Name="txbTags" 
                                    Grid.Column="1" 
                                    Margin="4" 
                                    Padding="4 6 4 4" 
                                    MaxLength="20"
                                    FontSize="16" 
                                    Height="40"
                                    PlaceholderText="按下回车 Enter 以创建标签（最多添加 7 项）"
                                    VerticalAlignment="Center" 
                                    VerticalContentAlignment="Center"
                                    BorderThickness="1"
                                    BorderBrush="Gray"
                                    KeyDown="Txbtags_KeyDown"/>
                            </Grid>

                            <ItemsRepeater 
                                Grid.Row="1"
                                Margin="50 0 0 0"
                                HorizontalAlignment="Stretch"
                                ItemsSource="{x:Bind _viewModel.TagList, Mode=OneWay}">
                                <ItemsRepeater.Layout>
                                    <LinedFlowLayout 
                                        ItemsStretch="Fill" 
                                        LineSpacing="5"
                                        MinItemSpacing="10"/>
                                </ItemsRepeater.Layout>
                                <ItemsRepeater.ItemTemplate>
                                    <DataTemplate>
                                        <ItemContainer>
                                            <StackPanel
                                                CornerRadius="5"
                                                Background="{StaticResource SystemControlBackgroundAccentBrush}"                                               
                                                Padding="8 5"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Stretch">
                                                <TextBlock 
                                                    Text="{Binding}"
                                                    Foreground="{StaticResource SystemControlForegroundAltHighBrush}"
                                                    HorizontalTextAlignment="Center"/>
                                                <Button
                                                    Margin="8 0 0 0"
                                                    Padding="0"
                                                    Background="Transparent"
                                                    Foreground="{StaticResource SystemControlForegroundAltHighBrush}"
                                                    BorderThickness="0"
                                                    Click="TagDelButton_Click">
                                                    <FontIcon 
                                                        FontFamily="Segoe MDL2 Assets"
                                                        Glyph="&#xE711;"
                                                        FontSize="14"/>
                                                </Button>
                                            </StackPanel>
                                        </ItemContainer>
                                    </DataTemplate>
                                </ItemsRepeater.ItemTemplate>
                            </ItemsRepeater>
                        </Grid>

                        <Grid Grid.Row="3" VerticalAlignment="Center" Margin="6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Text="简介:"
                                Margin="4 10 4 4" 
                                FontSize="16"/>
                            <TextBox 
                                Grid.Column="1"
                                x:Name="txbDescribe" 
                                Text="{x:Bind _viewModel.Desc, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                Margin="4" 
                                Padding="4 6 4 4" 
                                MaxLength="200"
                                FontSize="16"  
                                Height="200" 
                                AcceptsReturn="True"
                                BorderThickness="1"
                                BorderBrush="Gray" 
                                TextWrapping="Wrap"/>
                        </Grid>

                        <StackPanel
                            x:Name="spBtn" 
                            Grid.Row="4" 
                            Orientation="Horizontal" 
                            Margin="6"
                            Spacing="8"
                            VerticalAlignment="Bottom" 
                            HorizontalAlignment="Right">
                            <Button 
                                x:Name="btnClear" 
                                Content="清空"
                                Foreground="{ThemeResource TextOnAccentFillColorPrimaryBrush}"                            
                                Background="DarkRed"
                                Width="100" 
                                Height="40"
                                Click="ClearButton_Click"/>
                            <Button 
                                Content="上传" 
                                IsEnabled="{x:Bind _viewModel.IsOk, Mode=OneWay}"
                                Background="{ThemeResource AccentAcrylicBackgroundFillColorBaseBrush}" 
                                Width="100" 
                                Height="40"
                                Click="UploadButton_Click"/>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
            </Border>
        </Frame>
    </Grid>
</Page>
